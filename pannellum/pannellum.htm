<!DOCTYPE HTML>
<!-- Pannellum 2.1.0, https://github.com/mpetroff/pannellum -->
<html><head><title>pannellum</title><meta charset=utf-8><style type="text/css">html{height:100%}body{margin:0;padding:0;overflow:hidden;position:fixed;cursor:default;width:100%;height:100%;font-family:Helvetica,"Nimbus Sans L","Liberation Sans",Arial,sans-serif;background:#f4f4f4 url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2267%22%20height%3D%22100%22%20viewBox%3D%220%200%2067%20100%22%3E%0A%3Cpath%20stroke%3D%22%23ccc%22%20fill%3D%22none%22%20d%3D%22M33.5%2C50%2C0%2C63%2C33.5%2C75%2C67%2C63%2C33.5%2C50m-33.5-50%2C67%2C25m-0.5%2C0%2C0%2C75m-66.5-75%2C67-25m-33.5%2C75%2C0%2C25m0-100%2C0%2C50%22%2F%3E%0A%3C%2Fsvg%3E%0A') repeat;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-o-user-select:none;-ms-user-select:none;user-select:none}.grab{cursor:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%2226%22%20width%3D%2226%22%3E%0A%3Cpath%20stroke%3D%22%23000%22%20stroke-width%3D%221px%22%20fill%3D%22%23fff%22%20d%3D%22m15.3%2020.5s6.38-6.73%204.64-8.24-3.47%201.01-3.47%201.01%203.61-5.72%201.41-6.49c-2.2-0.769-3.33%204.36-3.33%204.36s0.873-5.76-1.06-5.76-1.58%205.39-1.58%205.39-0.574-4.59-2.18-4.12c-1.61%200.468-0.572%205.51-0.572%205.51s-1.58-4.89-2.93-3.79c-1.35%201.11%200.258%205.25%200.572%206.62%200.836%202.43%202.03%202.94%202.17%205.55%22%2F%3E%0A%3C%2Fsvg%3E%0A') 12 8,default}.grabbing{cursor:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%2226%22%20width%3D%2226%22%3E%0A%3Cpath%20stroke%3D%22%23000%22%20stroke-width%3D%221px%22%20fill%3D%22%23fff%22%20d%3D%22m15.3%2020.5s5.07-5.29%203.77-6.74c-1.31-1.45-2.53%200.14-2.53%200.14s2.74-3.29%200.535-4.06c-2.2-0.769-2.52%201.3-2.52%201.3s0.81-2.13-1.12-2.13-1.52%201.77-1.52%201.77-0.261-1.59-1.87-1.12c-1.61%200.468-0.874%202.17-0.874%202.17s-0.651-1.55-2-0.445c-1.35%201.11-0.68%202.25-0.365%203.62%200.836%202.43%202.03%202.94%202.17%205.55%22%2F%3E%0A%3C%2Fsvg%3E%0A') 12 8,default}.sprite{background-image:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2226%22%20height%3D%22156%22%3E%0A%3Ccircle%20fill-opacity%3D%22.78%22%20cy%3D%22117%22%20cx%3D%2213%22%20r%3D%2211%22%20fill%3D%22%23fff%22%2F%3E%0A%3Ccircle%20fill-opacity%3D%22.78%22%20cy%3D%22143%22%20cx%3D%2213%22%20r%3D%2211%22%20fill%3D%22%23fff%22%2F%3E%0A%3Cpath%20d%3D%22m5%2083v6h2v-4h4v-2h-6zm10%200v2h4v4h2v-6h-6zm-5%205v6h6v-6h-6zm-5%205v6h6v-2h-4v-4h-2zm14%200v4h-4v2h6v-6h-2z%22%2F%3E%0A%3Cpath%20d%3D%22m13%20110a7%207%200%200%200%20-7%207%207%207%200%200%200%207%207%207%207%200%200%200%207%20-7%207%207%200%200%200%20-7%20-7zm-1%203h2v2h-2v-2zm0%203h2v5h-2v-5z%22%2F%3E%0A%3Cpath%20d%3D%22m5%2057v6h2v-4h4v-2h-6zm10%200v2h4v4h2v-6h-6zm-10%2010v6h6v-2h-4v-4h-2zm14%200v4h-4v2h6v-6h-2z%22%2F%3E%0A%3Cpath%20d%3D%22m17%2037.9998v2h-8v-2z%22%2F%3E%0A%3Cpath%20d%3D%22m12%209v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2z%22%2F%3E%0A%3Cpath%20d%3D%22m13%20136-6.125%206.125h4.375v7.875h3.5v-7.875h4.375z%22%2F%3E%0A%3C%2Fsvg%3E%0A')}#container{cursor:inherit}#page{width:100%;height:100%}.controls{position:absolute;background-color:#fff;border:1px solid #999;border-color:rgba(0,0,0,0.4);border-radius:3px;cursor:pointer}.control:hover{background-color:#f8f8f8}#zoomcontrols{top:4px;left:4px;width:26px;height:52px}#zoom_in{width:100%;height:50%;position:absolute;top:0;border-radius:3px 3px 0 0}#zoom_out{width:100%;height:50%;position:absolute;bottom:0;background-position:0 -26px;border-top:1px solid #ddd;border-top-color:rgba(0,0,0,0.10);border-radius:0 0 3px 3px}#fullscreentoggle_button{top:66px;left:4px;width:26px;height:26px}.fullscreentoggle_button_inactive{background-position:0 -52px}.fullscreentoggle_button_active{background-position:0 -78px}#panorama_info{position:absolute;bottom:4px;background-color:rgba(0,0,0,0.7);border-radius:0 3px 3px 0;padding-right:10px;color:#fff;text-align:left;display:none}#title_box{position:relative;font-size:20px;display:table;padding-left:5px;margin-bottom:3px}#author_box{position:relative;font-size:12px;display:table;padding-left:5px}#load_box{position:absolute;top:50%;left:50%;width:200px;height:150px;margin:-75px 0 0 -100px;background-color:rgba(0,0,0,0.7);border-radius:3px;text-align:center;font-size:20px;display:none;color:#fff}#lbox{position:absolute;top:50%;left:50%;width:20px;height:20px;margin:-10px 0 0 -10px;display:none}.loading{animation-duration:1.5s;-webkit-animation-duration:1.5s;animation-name:mv;-webkit-animation-name:mv;animation-iteration-count:infinite;-webkit-animation-iteration-count:infinite;animation-timing-function:linear;-webkit-animation-timing-function:linear;height:10px;width:10px;background-color:#fff;position:relative}@keyframes mv{from{left:0;top:0}25%{left:10px;top:0}50%{left:10px;top:10px}75%{left:0;top:10px}to{left:0;top:0}}@-webkit-keyframes mv{from{left:0;top:0}25%{left:10px;top:0}50%{left:10px;top:10px}75%{left:0;top:10px}to{left:0;top:0}}#load_button{position:absolute;top:50%;left:50%;width:200px;height:100px;margin:-50px 0 0 -100px;background-color:#222;background-color:rgba(0,0,0,.7);border-radius:3px;text-align:center;font-size:20px;display:table;color:#fff;cursor:pointer}#load_button:hover{background-color:#111;background-color:rgba(0,0,0,.8)}#load_button p{display:table-cell;vertical-align:middle}.infobox{font-size:15px;position:absolute;top:50%;left:50%;width:200px;height:150px;margin:-75px 0 0 -100px;background-color:#000;border-radius:3px;display:table;text-align:center;color:#fff}.infobox p{display:table-cell;vertical-align:middle;padding:0 5px 0 5px}#nocanvas{display:none}#about{font-size:11px;line-height:11px;color:#fff;padding:5px 8px 5px 8px;background:rgba(0,0,0,0.7);border-radius:3px;position:absolute;top:50px;left:50px;display:none;opacity:0;-moz-transition:opacity .3s ease-in-out;-webkit-transition:opacity .3s ease-in-out;-o-transition:opacity .3s ease-in-out;-ms-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out}#about a:link,#about a:visited{color:#fff}#about a:hover,#about a:active{color:#eee}.hotspot{position:absolute;height:26px;width:26px;visibility:hidden;cursor:default;border-radius:13px;vertical-align:middle}.hotspot:hover{background-color:rgba(255,255,255,0.2)}.hotspot.info{background-position:0 -104px}.hotspot.scene{background-position:0 -130px}div.tooltip span{visibility:hidden;position:absolute;border-radius:3px;background-color:rgba(0,0,0,0.7);color:#fff;text-align:center;max-width:200px;z-index:10;padding:5px 10px;margin-top:-41px;margin-left:-220px;cursor:default}div.tooltip:hover span{visibility:visible}div.tooltip:hover:after{content:"";position:absolute;width:0;height:0;border-width:10px;border-style:solid;border-color:rgba(0,0,0,0.7) transparent transparent transparent;top:-12px;left:3px}#compass{width:50px;height:50px;right:4px;bottom:4px;border-radius:25px;background-image:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%2250%22%20width%3D%2250%22%3E%0A%3Cpath%20d%3D%22m24.5078%206-3.2578%2018h7.5l-3.25781-18h-0.984376zm-3.2578%2020%203.2578%2018h0.9844l3.2578-18h-7.5zm1.19531%200.9941h5.10938l-2.5547%2014.1075-2.5547-14.1075z%22%2F%3E%0A%3C%2Fsvg%3E%0A');cursor:default;display:none}.viewport{position:relative;float:left;overflow:hidden;width:100%;height:100%;-webkit-perspective:700px;perspective:700px}.world{display:none;position:absolute;left:50%;top:50%;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transform:translate3d(0px,0px,700px) rotateX(0deg) rotateY(0deg) rotateZ(0deg);transform:translate3d(0px,0px,700px) rotateX(0deg) rotateY(0deg) rotateZ(0deg)}.face{position:absolute;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-backface-visibility:hidden;backface-visibility:hidden;height:1002px;width:1002px;background-size:100% 100%}.fface{-webkit-transform:translate3d(-501px,-501px,-500px) rotateX(0deg) rotateY(0deg) rotateZ(0deg);transform:translate3d(-501px,-501px,-500px) rotateX(0deg) rotateY(0deg) rotateZ(0deg)}.bface{-webkit-transform:translate3d(501px,-501px,500px) rotateX(180deg) rotateY(0deg) rotateZ(180deg);transform:translate3d(501px,-501px,500px) rotateX(180deg) rotateY(0deg) rotateZ(180deg)}.uface{-webkit-transform:translate3d(-501px,-500px,501px) rotateX(270deg) rotateY(0deg) rotateZ(0deg);transform:translate3d(-501px,-500px,501px) rotateX(270deg) rotateY(0deg) rotateZ(0deg)}.dface{-webkit-transform:translate3d(-501px,500px,-501px) rotateX(90deg) rotateY(0deg) rotateZ(0deg);transform:translate3d(-501px,500px,-501px) rotateX(90deg) rotateY(0deg) rotateZ(0deg)}.lface{-webkit-transform:translate3d(-500px,-501px,501px) rotateX(180deg) rotateY(90deg) rotateZ(180deg);transform:translate3d(-500px,-501px,501px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)}.rface{-webkit-transform:translate3d(500px,-501px,-501px) rotateX(0deg) rotateY(270deg) rotateZ(0deg);transform:translate3d(500px,-501px,-501px) rotateX(0deg) rotateY(270deg) rotateZ(0deg)}.dragfix,#preview{position:absolute;height:100%;width:100%}#preview{top:0;left:0;background-size:100% 100%}#lbar{width:150px;margin:0 auto;border:#fff 1px solid;height:6px}#lbar_fill{background:#fff;height:100%;width:0}#lmsg{font-size:12px}</style></head><body><div id=page><div id=container><canvas id=canvas></canvas><div class=world><div class="face fface"></div><div class="face bface"></div><div class="face uface"></div><div class="face dface"></div><div class="face lface"></div><div class="face rface"></div></div></div><div class=dragfix></div><div id=panorama_info><div id=title_box></div><div id=author_box></div></div><div id=zoomcontrols class=controls><div id=zoom_in onclick="zoomIn(5)" class="sprite control"></div><div id=zoom_out onclick="zoomOut(5)" class="sprite control"></div></div><div id=fullscreentoggle_button onclick="toggleFullscreen()" class="sprite fullscreentoggle_button_inactive controls control"></div><div id=load_box><p>Loading...</p><div id=lbox><div class=loading></div></div><div id=lbar><div id=lbar_fill></div></div><p id=lmsg></p></div><div id=load_button onclick="load()"><p>Click to<br>Load<br>Panorama<p></div><div id=nocanvas class=infobox><p>Your browser does not have the necessary WebGL support to display this panorama.</p></div><div id=compass class="controls control"></div><span id=about style="display: none;"><a href="http://pannellum.org/" target=_blank>Pannellum</a> 2.1.0</span><noscript><div id=nojavascript class=infobox><p>Javascript is required to view this panorama.<br>(It could be worse; you could need a plugin.)</p></div></noscript><script type="text/javascript">window.libpannellum=function(b,c,d){function h(b,d,h,C){function z(b,a,c,d,f,e){this.vertices=b;this.side=a;this.level=c;this.x=d;this.y=f;this.path=e.replace("%s",a).replace("%l",c).replace("%x",d).replace("%y",f)}this.container=b;this.canvas=b.querySelector("#canvas");this.image=d;this.video=C;this.imageType="equirectangular";"undefined"!=typeof h&&(this.imageType=h);var f,a;this.init=function(v,n,d){var m;a=this.canvas.getContext("experimental-webgl",{alpha:!1,depth:!1});if(!a&&"multires"==this.imageType&&
this.image.fallbackPath&&"WebkitAppearance"in c.documentElement.style)for(b.className="viewport",this.world=b.querySelector(".world"),this.world.style.display="block",v=this.image.basePath+this.image.fallbackPath,n="fbudlr".split(""),m=0;6>m;m++)this.world.querySelector("."+n[m]+"face").style.backgroundImage='url("'+v.replace("%s",n[m])+"."+this.image.extension+'")';else{if(!a)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};this.image.fullpath=this.image.basePath?this.image.basePath+
this.image.path:this.image.path;this.image.invTileResolution=1/this.image.tileResolution;var h=this.createCube();this.vtmp=[];for(m=0;6>m;m++)this.vtmp[m]=h.slice(12*m,12*m+12),h=this.createCube();m=a.TEXTURE_2D;a.viewport(0,0,this.canvas.width,this.canvas.height);var h=a.createShader(a.VERTEX_SHADER),e=k;"multires"==this.imageType&&(e=g);a.shaderSource(h,e);a.compileShader(h);var e=a.createShader(a.FRAGMENT_SHADER),B=r;"cubemap"==this.imageType?(m=a.TEXTURE_CUBE_MAP,B=p):"multires"==this.imageType&&
(B=A);a.shaderSource(e,B);a.compileShader(e);f=a.createProgram();a.attachShader(f,h);a.attachShader(f,e);a.linkProgram(f);a.getShaderParameter(h,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(h));a.getShaderParameter(e,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(e));a.getProgramParameter(f,a.LINK_STATUS)||console.log(a.getProgramInfoLog(f));a.useProgram(f);f.drawInProgress=!1;f.texCoordLocation=a.getAttribLocation(f,"a_texCoord");a.enableVertexAttribArray(f.texCoordLocation);"multires"!=
this.imageType?(f.texCoordBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,f.texCoordBuffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),a.STATIC_DRAW),a.vertexAttribPointer(f.texCoordLocation,2,a.FLOAT,!1,0,0),f.aspectRatio=a.getUniformLocation(f,"u_aspectRatio"),a.uniform1f(f.aspectRatio,this.canvas.width/this.canvas.height),f.psi=a.getUniformLocation(f,"u_psi"),f.theta=a.getUniformLocation(f,"u_theta"),f.f=a.getUniformLocation(f,"u_f"),f.h=a.getUniformLocation(f,
"u_h"),f.v=a.getUniformLocation(f,"u_v"),f.vo=a.getUniformLocation(f,"u_vo"),a.uniform1f(f.h,v/(2*Math.PI)),a.uniform1f(f.v,n/Math.PI),a.uniform1f(f.vo,d/Math.PI),f.texture=a.createTexture(),a.bindTexture(m,f.texture),"cubemap"==this.imageType?(a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,this.image[1]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_X,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,this.image[3]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Y,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,this.image[4]),
a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,this.image[5]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Z,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,this.image[0]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,this.image[2])):a.texImage2D(m,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,this.image),a.texParameteri(m,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(m,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(m,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(m,a.TEXTURE_MAG_FILTER,
a.LINEAR)):(f.vertPosLocation=a.getAttribLocation(f,"a_vertCoord"),a.enableVertexAttribArray(f.vertPosLocation),f.cubeVertBuf=a.createBuffer(),f.cubeVertTexCoordBuf=a.createBuffer(),f.cubeVertIndBuf=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,f.cubeVertTexCoordBuf),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),a.STATIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f.cubeVertIndBuf),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),a.STATIC_DRAW),f.perspUniform=a.getUniformLocation(f,
"u_perspMatrix"),f.cubeUniform=a.getUniformLocation(f,"u_cubeMatrix"),f.level=-1,f.currentNodes=[],f.nodeCache=[],f.nodeCacheTimestamp=0);if(0!==a.getError()){console.log("Error: Something went wrong with WebGL!");if("equirectangular"==this.imageType){if(v=Math.max(this.image.width,this.image.height),n=a.getParameter(a.MAX_TEXTURE_SIZE),v>n)throw console.log("Error: The image is too big; it's "+v+"px wide, but this device's maximum supported width is "+n+"px."),{type:"webgl size error",width:v,maxWidth:n};
}else if("cubemap"==this.imageType&&(v=this.image[0].width,n=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),v>n))throw console.log("Error: The cube face image is too big; it's "+v+"px wide, but this device's maximum supported width is "+n+"px."),{type:"webgl size error",width:v,maxWidth:n};throw{type:"webgl error"};}}};this.render=function(b,n,c){if(a||"multires"!=this.imageType)if("multires"!=this.imageType)c=2*Math.atan(Math.tan(0.5*c)/(this.canvas.width/this.canvas.height)),c=1/Math.tan(0.5*c),a.uniform1f(f.psi,
n),a.uniform1f(f.theta,b),a.uniform1f(f.f,c),!0===this.video&&"equirectangular"==this.imageType&&(a.bindTexture(a.TEXTURE_2D,f.texture),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,this.image)),a.drawArrays(a.TRIANGLES,0,6);else{var d=this.makePersp(c,this.canvas.width/this.canvas.height,0.1,100);this.checkZoom(c);var h=this.identityMatrix3(),h=this.rotateMatrix(h,-b,"x"),h=this.rotateMatrix(h,n,"y"),h=this.makeMatrix4(h);a.uniformMatrix4fv(f.perspUniform,!1,new Float32Array(this.transposeMatrix4(d)));
a.uniformMatrix4fv(f.cubeUniform,!1,new Float32Array(this.transposeMatrix4(h)));d=this.rotatePersp(d,h);f.nodeCache.sort(this.multiresNodeSort);200<f.nodeCache.length&&f.nodeCache.length>f.currentNodes.length+50&&f.nodeCache.splice(200,f.nodeCache.length-200);f.currentNodes=[];for(var h="fbudlr".split(""),e=0;6>e;e++){var g=new z(this.vtmp[e],h[e],1,0,0,this.image.fullpath);this.testMultiresNode(d,g,b,n,c)}f.currentNodes.sort(this.multiresNodeRenderSort);for(b=0;b<f.currentNodes.length;b++)if(!f.currentNodes[b].texture){setTimeout(this.processNextTile(f.currentNodes[b]),
0);break}this.multiresDraw()}else c=1/Math.tan(c/2),c=c*this.canvas.width/2+"px",b="translate3d(0px, 0px, "+c+") rotateX("+b+"rad) rotateY("+n+"rad) rotateZ(0rad)",this.world.style.webkitTransform=b,this.world.style.transform=b,this.container.style.webkitPerspective=c,this.container.style.perspective=c};this.isLoading=function(){if(a&&"multires"==this.imageType)for(var b=0;b<f.currentNodes.length;b++)if(!f.currentNodes[b].textureLoaded)return!0;return!1};this.multiresNodeSort=function(b,a){return 1==
b.level&&1!=a.level?-1:1==a.level&&1!=b.level?1:a.timestamp-b.timestamp};this.multiresNodeRenderSort=function(b,a){return b.level!=a.level?b.level-a.level:b.diff-a.diff};this.multiresDraw=function(){if(!f.drawInProgress){f.drawInProgress=!0;for(var b=0;b<f.currentNodes.length;b++)f.currentNodes[b].textureLoaded&&(a.bindBuffer(a.ARRAY_BUFFER,f.cubeVertBuf),a.bufferData(a.ARRAY_BUFFER,new Float32Array(f.currentNodes[b].vertices),a.STATIC_DRAW),a.vertexAttribPointer(f.vertPosLocation,3,a.FLOAT,!1,0,
0),a.bindBuffer(a.ARRAY_BUFFER,f.cubeVertTexCoordBuf),a.vertexAttribPointer(f.texCoordLocation,2,a.FLOAT,!1,0,0),a.bindTexture(a.TEXTURE_2D,f.currentNodes[b].texture),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0));f.drawInProgress=!1}};this.testMultiresNode=function(b,a,c,d,h){if(this.checkSquareInView(b,a.vertices)){var e=a.vertices,g=e[0]+e[3]+e[6]+e[9],k=e[1]+e[4]+e[7]+e[10],q=e[2]+e[5]+e[8]+e[11],u=Math.sqrt(g*g+k*k+q*q),q=Math.asin(q/u),g=Math.atan2(k,g)-d,g=g+(g>Math.PI?-2*Math.PI:g<-Math.PI?
2*Math.PI:0),g=Math.abs(g);a.diff=Math.acos(Math.sin(c)*Math.sin(q)+Math.cos(c)*Math.cos(q)*Math.cos(g));g=!1;for(k=0;k<f.nodeCache.length;k++)if(f.nodeCache[k].path==a.path){g=!0;f.nodeCache[k].timestamp=f.nodeCacheTimestamp++;f.nodeCache[k].diff=a.diff;f.currentNodes.push(f.nodeCache[k]);break}g||(a.timestamp=f.nodeCacheTimestamp++,f.currentNodes.push(a),f.nodeCache.push(a));if(a.level<f.level){var q=this.image.cubeResolution*Math.pow(2,a.level-this.image.maxLevel),g=Math.ceil(q*this.image.invTileResolution)-
1,k=q%this.image.tileResolution*2,l=2*q%this.image.tileResolution;0===l&&(l=this.image.tileResolution);0===k&&(k=2*this.image.tileResolution);u=0.5;if(a.x==g||a.y==g)u=1-this.image.tileResolution/(this.image.tileResolution+l);var p=1-u,q=[],w=u,r=u,s=u,x=p,y=p,t=p;if(l<this.image.tileResolution)if(a.x==g&&a.y!=g){if(y=r=0.5,"d"==a.side||"u"==a.side)t=s=0.5}else a.x!=g&&a.y==g&&(x=w=0.5,"l"==a.side||"r"==a.side)&&(t=s=0.5);k<this.image.tileResolution&&(a.x==g&&(w=0,x=1,"l"==a.side||"r"==a.side)&&(s=
0,t=1),a.y==g&&(r=0,y=1,"d"==a.side||"u"==a.side)&&(s=0,t=1));l=[e[0],e[1],e[2],e[0]*w+e[3]*x,e[1]*u+e[4]*p,e[2]*s+e[5]*t,e[0]*w+e[6]*x,e[1]*r+e[7]*y,e[2]*s+e[8]*t,e[0]*u+e[9]*p,e[1]*r+e[10]*y,e[2]*s+e[11]*t];l=new z(l,a.side,a.level+1,2*a.x,2*a.y,this.image.fullpath);q.push(l);a.x==g&&k<this.image.tileResolution||(l=[e[0]*w+e[3]*x,e[1]*u+e[4]*p,e[2]*s+e[5]*t,e[3],e[4],e[5],e[3]*u+e[6]*p,e[4]*r+e[7]*y,e[5]*s+e[8]*t,e[0]*w+e[6]*x,e[1]*r+e[7]*y,e[2]*s+e[8]*t],l=new z(l,a.side,a.level+1,2*a.x+1,2*a.y,
this.image.fullpath),q.push(l));a.x==g&&k<this.image.tileResolution||a.y==g&&k<this.image.tileResolution||(l=[e[0]*w+e[6]*x,e[1]*r+e[7]*y,e[2]*s+e[8]*t,e[3]*u+e[6]*p,e[4]*r+e[7]*y,e[5]*s+e[8]*t,e[6],e[7],e[8],e[9]*w+e[6]*x,e[10]*u+e[7]*p,e[11]*s+e[8]*t],l=new z(l,a.side,a.level+1,2*a.x+1,2*a.y+1,this.image.fullpath),q.push(l));a.y==g&&k<this.image.tileResolution||(l=[e[0]*u+e[9]*p,e[1]*r+e[10]*y,e[2]*s+e[11]*t,e[0]*w+e[6]*x,e[1]*r+e[7]*y,e[2]*s+e[8]*t,e[9]*w+e[6]*x,e[10]*u+e[7]*p,e[11]*s+e[8]*t,e[9],
e[10],e[11]],l=new z(l,a.side,a.level+1,2*a.x,2*a.y+1,this.image.fullpath),q.push(l));for(a=0;a<q.length;a++)this.testMultiresNode(b,q[a],c,d,h)}}};this.setImage=function(a){this.image=a;this.init()};this.setCanvas=function(a){this.canvas=a;this.init()};this.createCube=function(){return[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1]};this.identityMatrix3=function(){return[1,
0,0,0,1,0,0,0,1]};this.rotateMatrix=function(a,b,c){var d=Math.sin(b);b=Math.cos(b);if("x"==c)return[a[0],b*a[1]+d*a[2],b*a[2]-d*a[1],a[3],b*a[4]+d*a[5],b*a[5]-d*a[4],a[6],b*a[7]+d*a[8],b*a[8]-d*a[7]];if("y"==c)return[b*a[0]-d*a[2],a[1],b*a[2]+d*a[0],b*a[3]-d*a[5],a[4],b*a[5]+d*a[3],b*a[6]-d*a[8],a[7],b*a[8]+d*a[6]]};this.makeMatrix4=function(a){return[a[0],a[1],a[2],0,a[3],a[4],a[5],0,a[6],a[7],a[8],0,0,0,0,1]};this.transposeMatrix4=function(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],
a[6],a[10],a[14],a[3],a[7],a[11],a[15]]};this.makePersp=function(a,b,c,d){a=2*Math.atan(Math.tan(a/2)*this.canvas.height/this.canvas.width);a=1/Math.tan(a/2);return[a/b,0,0,0,0,a,0,0,0,0,(d+c)/(c-d),2*d*c/(c-d),0,0,-1,0]};this.processLoadedTexture=function(b,c){a.bindTexture(a.TEXTURE_2D,c);a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,b);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,
a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindTexture(a.TEXTURE_2D,null)};this.processNextTile=function(b){if(!b.texture){b.texture=a.createTexture();b.image=new Image;b.image.crossOrigin="anonymous";var c=this;b.image.onload=function(){c.processLoadedTexture(b.image,b.texture);b.textureLoaded=!0};b.image.src=b.path+"."+this.image.extension}};this.checkZoom=function(a){for(var b=1;b<this.image.maxLevel&&this.canvas.width>this.image.tileResolution*Math.pow(2,
b-1)*Math.tan(a/2)*0.707;)b++;f.level=b};this.rotatePersp=function(a,b){return[a[0]*b[0],a[0]*b[1],a[0]*b[2],0,a[5]*b[4],a[5]*b[5],a[5]*b[6],0,a[10]*b[8],a[10]*b[9],a[10]*b[10],a[11],-b[8],-b[9],-b[10],0]};this.applyRotPerspToVec=function(a,b){return[a[0]*b[0]+a[1]*b[1]+a[2]*b[2],a[4]*b[0]+a[5]*b[1]+a[6]*b[2],a[11]+a[8]*b[0]+a[9]*b[1]+a[10]*b[2],1/(a[12]*b[0]+a[13]*b[1]+a[14]*b[2])]};this.checkInView=function(a,b){var c=this.applyRotPerspToVec(a,b),d=c[0]*c[3],f=c[1]*c[3],c=c[2]*c[3],e=[0,0,0];-1>
d&&(e[0]=-1);1<d&&(e[0]=1);-1>f&&(e[1]=-1);1<f&&(e[1]=1);if(-1>c||1<c)e[2]=1;return e};this.checkSquareInView=function(a,b){var c=this.checkInView(a,b.slice(0,3)),d=this.checkInView(a,b.slice(3,6)),f=this.checkInView(a,b.slice(6,9)),e=this.checkInView(a,b.slice(9,12)),g=c[0]+d[0]+f[0]+e[0];if(-4==g||4==g)return!1;g=c[1]+d[1]+f[1]+e[1];return-4==g||4==g||4==c[2]+d[2]+f[2]+e[2]?!1:!0}}var k="attribute vec2 a_texCoord;varying vec2 v_texCoord;void main() {gl_Position = vec4(a_texCoord, 0.0, 1.0);v_texCoord = a_texCoord;}",
g="attribute vec3 a_vertCoord;attribute vec2 a_texCoord;uniform mat4 u_cubeMatrix;uniform mat4 u_perspMatrix;varying mediump vec2 v_texCoord;void main(void) {gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);v_texCoord = a_texCoord;}",p="precision mediump float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nconst float PI = 3.14159265358979323846264;\nuniform samplerCube u_image;\nvarying vec2 v_texCoord;\nvoid main() {\nvec3 planePos = vec3(v_texCoord.xy, 0.0);\nplanePos.x *= u_aspectRatio;\nvec3 viewVector = planePos - vec3(0.0,0.0,-u_f);\nfloat sinpsi = sin(-u_psi);\nfloat cospsi = cos(-u_psi);\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nvec3 viewVectorTheta = viewVector;\nviewVectorTheta.z = viewVector.z * costheta - viewVector.y * sintheta;\nviewVectorTheta.y = viewVector.z * sintheta + viewVector.y * costheta;\nvec3 viewVectorPsi = viewVectorTheta;\nviewVectorPsi.x = viewVectorTheta.x * cospsi - viewVectorTheta.z * sinpsi;\nviewVectorPsi.z = viewVectorTheta.x * sinpsi + viewVectorTheta.z * cospsi;\ngl_FragColor = textureCube(u_image, viewVectorPsi);\n}",
r="precision mediump float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nconst float PI = 3.14159265358979323846264;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvoid main() {\nfloat x = v_texCoord.x * u_aspectRatio;\nfloat y = v_texCoord.y;\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nfloat a = u_f * costheta - y * sintheta;\nfloat root = sqrt(x * x + a * a);\nfloat lambda = atan(x / root, a / root) + u_psi;\nfloat phi = atan((y * costheta + u_f * sintheta) / root);\nif(lambda > PI)\nlambda = lambda - PI * 2.0;\nif(lambda < -PI)\nlambda = lambda + PI * 2.0;\nvec2 coord = vec2(lambda / PI, phi / (PI / 2.0));\nif(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)\ngl_FragColor = vec4(0, 0, 0, 1.0);\nelse\ngl_FragColor = texture2D(u_image, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));\n}",
A="varying mediump vec2 v_texCoord;uniform sampler2D u_sampler;void main(void) {gl_FragColor = texture2D(u_sampler, v_texCoord);}";return{renderer:function(b,c,d,g){return new h(b,c,d,g)}}}(window,document);window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b,c){window.setTimeout(b,1E3/60)}}());"use strict";
document.addEventListener("contextmenu",onRightClick,!1);
var config,tourConfig={},configFromURL,renderer,isUserInteracting=!1,latestInteraction=Date.now(),onPointerDownPointerX=0,onPointerDownPointerY=0,onPointerDownPointerDist=-1,onPointerDownYaw=0,onPointerDownPitch=0,keysDown=Array(10),fullscreenActive=!1,loaded=!1,error=!1,isTimedOut=!1,listenersAdded=!1,canvas=document.getElementById("canvas"),panoImage,prevTime,yawSpeed=0,pitchSpeed=0,zoomSpeed=0,hotspotsCreated=!1,defaultConfig={hfov:100,minHfov:50,maxHfov:120,pitch:0,minPitch:-85,maxPitch:85,yaw:0,
minYaw:-360,maxYaw:360,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,video:!1};parseURLParameters();processOptions();
function init(){function b(){renderer=new libpannellum.renderer(document.getElementById("container"),panoImage,config.type,config.video);listenersAdded||(listenersAdded=!0,document.addEventListener("mousedown",onDocumentMouseDown,!1),document.addEventListener("mousemove",onDocumentMouseMove,!1),document.addEventListener("mouseup",onDocumentMouseUp,!1),document.addEventListener("mousewheel",onDocumentMouseWheel,!1),document.addEventListener("DOMMouseScroll",onDocumentMouseWheel,!1),document.addEventListener("onresize",
onDocumentResize,!1),document.addEventListener("mozfullscreenchange",onFullScreenChange,!1),document.addEventListener("webkitfullscreenchange",onFullScreenChange,!1),document.addEventListener("msfullscreenchange",onFullScreenChange,!1),document.addEventListener("fullscreenchange",onFullScreenChange,!1),window.addEventListener("resize",onDocumentResize,!1),document.addEventListener("keydown",onDocumentKeyPress,!1),document.addEventListener("keyup",onDocumentKeyUp,!1),window.addEventListener("blur",
clearKeys,!1),document.addEventListener("mouseout",onDocumentMouseUp,!1),document.addEventListener("touchstart",onDocumentTouchStart,!1),document.addEventListener("touchmove",onDocumentTouchMove,!1),document.addEventListener("touchend",onDocumentTouchEnd,!1));renderInit();setTimeout(function(){isTimedOut=!0},500)}var c=document.createElement("div");c.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e";1==c.getElementsByTagName("i").length&&anError();var d;if("cubemap"==config.type){panoImage=
[];for(d=0;6>d;d++)panoImage.push(new Image),panoImage[d].crossOrigin="anonymous";document.getElementById("lbox").style.display="block";document.getElementById("lbar").style.display="none"}else"multires"==config.type?(c=JSON.parse(JSON.stringify(config.multiRes)),config.basePath?c.basePath=config.basePath+config.multiRes.basePath:tourConfig.basePath&&(c.basePath=tourConfig.basePath+config.multiRes.basePath),panoImage=c):panoImage=!0===config.video?document.createElement("video"):new Image;if("cubemap"==
config.type){var h=6,k=function(){h--;0===h&&b()};for(d=0;d<panoImage.length;d++)panoImage[d].onload=k,c=config.cubeMap[d],config.basePath?c=config.basePath+c:tourConfig.basePath&&(c=tourConfig.basePath+c),panoImage[d].src=c}else if("multires"==config.type)b();else if(c="",config.basePath?c=config.basePath:tourConfig.basePath&&(c=tourConfig.basePath),!0===config.video){for(d=0;d<config.panoramas.length;d++)if(0<panoImage.canPlayType(config.panoramas[d].type).length){panoImage.src=c+config.panoramas[d].file;
break}1>panoImage.src.length&&(console.log("Error: provided video formats are not supported"),anError("Your browser doesn't support any of the provided video formats. Please try using a different browser or device."));panoImage.play();b()}else c+=config.panorama,panoImage.onload=function(){window.URL.revokeObjectURL(this.src);b()},d=new XMLHttpRequest,d.onloadend=function(){parseGPanoXMP(this.response);document.getElementById("lmsg").innerHTML=""},d.onprogress=function(b){if(b.lengthComputable){var c=
b.loaded/b.total*100;document.getElementById("lbar_fill").style.width=c+"%";var d;1E6<b.total?(c="MB",d=(b.loaded/1E6).toFixed(2),b=(b.total/1E6).toFixed(2)):1E3<b.total?(c="kB",d=(b.loaded/1E3).toFixed(1),b=(b.total/1E3).toFixed(1)):(c="B",d=b.loaded,b=b.total);b=d+" / "+b+" "+c;document.getElementById("lmsg").innerHTML=b}else document.getElementById("lbox").style.display="block",document.getElementById("lbar").style.display="none"},d.open("GET",c,!0),d.responseType="blob",d.send();document.getElementById("page").className=
"grab"}
function parseGPanoXMP(b){var c=new FileReader;c.addEventListener("loadend",function(){var d=c.result,h=d.indexOf("<x:xmpmeta");if(-1<h&&!0!==config.ignoreGPanoXMP){var k=d.substring(h,d.indexOf("</x:xmpmeta>")+12),g=function(b){b=k.substring(k.indexOf(b+'="')+b.length+2);b=b.substring(0,b.indexOf('"'));return 0===b.length?null:Number(b)},d=g("GPano:FullPanoWidthPixels"),h=g("GPano:CroppedAreaImageWidthPixels"),p=g("GPano:FullPanoHeightPixels"),r=g("GPano:CroppedAreaImageHeightPixels"),A=g("GPano:CroppedAreaTopPixels"),g=
g("GPano:PoseHeadingDegrees");null!==d&&null!==h&&null!==p&&null!==r&&null!==A&&(config.haov=h/d*360,config.vaov=r/p*180,config.vOffset=-90*[(A+r/2)/p-0.5],null!==g&&(config.northOffset=g,config.compass=!0))}panoImage.src=window.URL.createObjectURL(b)});c.readAsText(b)}
function anError(b){void 0!==b&&(document.getElementById("nocanvas").innerHTML="<p>"+b+"</p>");document.getElementById("load_box").style.display="none";document.getElementById("nocanvas").style.display="table";document.getElementById("container").style.display="none"}function clearError(){document.getElementById("load_box").style.display="none";document.getElementById("nocanvas").style.display="none";error=!1}
function onRightClick(b){document.getElementById("about").style.left=b.clientX+"px";document.getElementById("about").style.top=b.clientY+"px";clearTimeout(onRightClick.t1);clearTimeout(onRightClick.t2);document.getElementById("about").style.display="block";document.getElementById("about").style.opacity=1;onRightClick.t1=setTimeout(function(){document.getElementById("about").style.opacity=0},2E3);onRightClick.t2=setTimeout(function(){document.getElementById("about").style.display="none"},2500);b.preventDefault()}
function onDocumentMouseDown(b){b.preventDefault();window.focus();loaded&&(config.autoRotate=!1,isUserInteracting=!0,latestInteraction=Date.now(),onPointerDownPointerX=b.clientX,onPointerDownPointerY=b.clientY,onPointerDownYaw=config.yaw,onPointerDownPitch=config.pitch,document.getElementById("page").className="grabbing",requestAnimationFrame(animate))}
function onDocumentMouseMove(b){if(isUserInteracting&&loaded){latestInteraction=Date.now();var c=180*(Math.atan(onPointerDownPointerX/canvas.width*2-1)-Math.atan(b.clientX/canvas.width*2-1))/Math.PI*config.hfov/90+onPointerDownYaw;yawSpeed=0.2*(c-config.yaw);config.yaw=c;c=360*Math.atan(Math.tan(config.hfov/360*Math.PI)*canvas.height/canvas.width)/Math.PI;b=180*(Math.atan(b.clientY/canvas.height*2-1)-Math.atan(onPointerDownPointerY/canvas.height*2-1))/Math.PI*c/90+onPointerDownPitch;pitchSpeed=0.2*
(b-config.pitch);config.pitch=b}}function onDocumentMouseUp(){isUserInteracting&&(isUserInteracting=!1,15<Date.now()-latestInteraction&&(pitchSpeed=yawSpeed=0),document.getElementById("page").className="grab")}
function onDocumentTouchStart(b){loaded&&(onPointerDownPointerX=b.targetTouches[0].clientX,onPointerDownPointerY=b.targetTouches[0].clientY,2==b.targetTouches.length&&(onPointerDownPointerX+=0.5*(b.targetTouches[1].clientX-b.targetTouches[0].clientX),onPointerDownPointerY+=0.5*(b.targetTouches[1].clientY-b.targetTouches[0].clientY),onPointerDownPointerDist=Math.sqrt((b.targetTouches[0].clientX-b.targetTouches[1].clientX)*(b.targetTouches[0].clientX-b.targetTouches[1].clientX)+(b.targetTouches[0].clientY-
b.targetTouches[1].clientY)*(b.targetTouches[0].clientY-b.targetTouches[1].clientY))),isUserInteracting=!0,latestInteraction=Date.now(),onPointerDownYaw=config.yaw,onPointerDownPitch=config.pitch,requestAnimationFrame(animate))}
function onDocumentTouchMove(b){b.preventDefault();loaded&&(latestInteraction=Date.now());if(isUserInteracting&&loaded){var c=b.targetTouches[0].clientX,d=b.targetTouches[0].clientY;2==b.targetTouches.length&&-1!=onPointerDownPointerDist&&(c+=0.5*(b.targetTouches[1].clientX-b.targetTouches[0].clientX),d+=0.5*(b.targetTouches[1].clientY-b.targetTouches[0].clientY),b=Math.sqrt((b.targetTouches[0].clientX-b.targetTouches[1].clientX)*(b.targetTouches[0].clientX-b.targetTouches[1].clientX)+(b.targetTouches[0].clientY-
b.targetTouches[1].clientY)*(b.targetTouches[0].clientY-b.targetTouches[1].clientY)),setHfov(config.hfov+=0.1*(onPointerDownPointerDist-b)),onPointerDownPointerDist=b);c=0.1*(onPointerDownPointerX-c)+onPointerDownYaw;yawSpeed=0.2*(c-config.yaw);config.yaw=c;d=0.1*(d-onPointerDownPointerY)+onPointerDownPitch;pitchSpeed=0.2*(d-config.pitch);config.pitch=d}}function onDocumentTouchEnd(){isUserInteracting=!1;15<Date.now()-latestInteraction&&(pitchSpeed=yawSpeed=0);onPointerDownPointerDist=-1}
function onDocumentMouseWheel(b){b.preventDefault();loaded&&(latestInteraction=Date.now(),b.wheelDeltaY?setHfov(config.hfov-=0.05*b.wheelDeltaY):b.wheelDelta?setHfov(config.hfov-=0.05*b.wheelDelta):b.detail&&setHfov(config.hfov+=1.5*b.detail),zoomSpeed=b.detail?0<b.detail?1:-1:0>b.detail?1:-1,requestAnimationFrame(animate))}function onDocumentKeyPress(b){b.preventDefault();config.autoRotate=!1;var c=b.keycode;b.which&&(c=b.which);27==c?fullscreenActive&&toggleFullscreen():changeKey(c,!0)}
function clearKeys(){for(var b=0;10>b;b++)keysDown[b]=!1}function onDocumentKeyUp(b){b.preventDefault();var c=b.keycode;b.which&&(c=b.which);changeKey(c,!1)}
function changeKey(b,c){var d=!1;switch(b){case 109:case 189:case 17:keysDown[0]!=c&&(d=!0);keysDown[0]=c;break;case 107:case 187:case 16:keysDown[1]!=c&&(d=!0);keysDown[1]=c;break;case 38:keysDown[2]!=c&&(d=!0);keysDown[2]=c;break;case 87:keysDown[6]!=c&&(d=!0);keysDown[6]=c;break;case 40:keysDown[3]!=c&&(d=!0);keysDown[3]=c;break;case 83:keysDown[7]!=c&&(d=!0);keysDown[7]=c;break;case 37:keysDown[4]!=c&&(d=!0);keysDown[4]=c;break;case 65:keysDown[8]!=c&&(d=!0);keysDown[8]=c;break;case 39:keysDown[5]!=
c&&(d=!0);keysDown[5]=c;break;case 68:keysDown[9]!=c&&(d=!0),keysDown[9]=c}d&&c&&(prevTime="undefined"!==typeof performance&&performance.now()?performance.now():Date.now(),requestAnimationFrame(animate))}
function keyRepeat(){if(loaded){var b=config.pitch,c=config.yaw,d=config.hfov,h;h="undefined"!==typeof performance&&performance.now()?performance.now():Date.now();var k=(h-prevTime)*config.hfov/1700;keysDown[0]&&setHfov(config.hfov+(0.8*zoomSpeed+0.2)*k);keysDown[1]&&setHfov(config.hfov+(0.8*zoomSpeed-0.2)*k);if(keysDown[2]||keysDown[6])config.pitch+=(0.8*pitchSpeed+0.2)*k;if(keysDown[3]||keysDown[7])config.pitch+=(0.8*pitchSpeed-0.2)*k;if(keysDown[4]||keysDown[8])config.yaw+=(0.8*yawSpeed-0.2)*k;
if(keysDown[5]||keysDown[9])config.yaw+=(0.8*yawSpeed+0.2)*k;var g=Date.now()-latestInteraction;config.autoRotate&&g>config.autoRotateInactivityDelay&&1E-6<k&&(config.yaw-=config.autoRotate/60*k);0<k&&(keysDown[4]||keysDown[5]||keysDown[8]||keysDown[9]||(config.yaw+=yawSpeed*k*0.85),keysDown[2]||keysDown[3]||keysDown[6]||keysDown[7]||(config.pitch+=pitchSpeed*k*0.85),keysDown[0]||keysDown[1]||setHfov(config.hfov+zoomSpeed*k*0.85));prevTime=h;0<k&&(yawSpeed=0.8*yawSpeed+(config.yaw-c)/k*0.2,pitchSpeed=
0.8*pitchSpeed+(config.pitch-b)/k*0.2,zoomSpeed=0.8*zoomSpeed+(config.hfov-d)/k*0.2,yawSpeed=Math.min(5,Math.max(yawSpeed,-5)),pitchSpeed=Math.min(5,Math.max(pitchSpeed,-5)),zoomSpeed=Math.min(5,Math.max(zoomSpeed,-5)));keysDown[0]&&keysDown[0]&&(zoomSpeed=0);(keysDown[2]||keysDown[6])&&(keysDown[3]||keysDown[7])&&(pitchSpeed=0);(keysDown[4]||keysDown[8])&&(keysDown[5]||keysDown[9])&&(yawSpeed=0)}}function onDocumentResize(){renderInit();onFullScreenChange()}
function animate(){loaded?(render(),isUserInteracting?requestAnimationFrame(animate):keysDown[0]||keysDown[1]||keysDown[2]||keysDown[3]||keysDown[4]||keysDown[5]||keysDown[6]||keysDown[7]||keysDown[8]||keysDown[9]||config.autoRotate||0.01<Math.abs(yawSpeed)||0.01<Math.abs(pitchSpeed)||0.01<Math.abs(zoomSpeed)?(keyRepeat(),requestAnimationFrame(animate)):renderer&&(renderer.isLoading()||!0===config.video&&!panoImage.paused&&!panoImage.ended)&&requestAnimationFrame(animate)):requestAnimationFrame(animate)}
function render(){var b;try{180<config.yaw?config.yaw-=360:-180>config.yaw&&(config.yaw+=360),b=config.yaw,config.yaw=Math.max(config.minYaw,Math.min(config.maxYaw,config.yaw)),!1!==config.autoRotate&&b!=config.yaw&&(config.autoRotate*=-1),config.pitch=Math.max(config.minPitch,Math.min(config.maxPitch,config.pitch)),renderer.render(config.pitch*Math.PI/180,config.yaw*Math.PI/180,config.hfov*Math.PI/180),renderHotSpots(),config.compass&&(document.getElementById("compass").style.transform="rotate("+
(-config.yaw-config.northOffset)+"deg)",document.getElementById("compass").style.webkitTransform="rotate("+(-config.yaw-config.northOffset)+"deg)")}catch(c){}}
function renderInit(){try{canvas.width=window.innerWidth,canvas.height=window.innerHeight,renderer.init(config.haov*Math.PI/180,config.vaov*Math.PI/180,config.vOffset*Math.PI/180),requestAnimationFrame(animate),config.compass?document.getElementById("compass").style.display="inline":document.getElementById("compass").style.display="none",createHotSpots(),document.getElementById("load_box").style.display="none",null!==document.getElementById("preview")&&document.getElementById("container").removeChild(document.getElementById("preview")),
loaded=!0}catch(b){"webgl error"==b.type||"no webgl"==b.type?anError():"webgl size error"==b.type&&anError("This panorama is too big for your device! It's "+b.width+"px wide, but your device only supports images up to "+b.maxWidth+"px wide. Try another device. (If you're the author, try scaling down the image.)")}}
function createHotSpots(){hotspotsCreated||(config.hotSpots?config.hotSpots.forEach(function(b){var c=document.createElement("div");c.setAttribute("class","hotspot tooltip sprite "+b.type);var d=document.createElement("span");d.innerHTML=b.text;var h;if(b.URL)h=document.createElement("a"),h.setAttribute("href",b.URL),h.setAttribute("target","_blank"),document.getElementById("container").appendChild(h),c.style.cursor="pointer",d.style.cursor="pointer",h.appendChild(c);else if(b.video)h=document.createElement("video"),
h.setAttribute("src",b.video),h.setAttribute("controls",!0),h.setAttribute("style","width:"+b.width+"px"),document.getElementById("container").appendChild(c),d.appendChild(h);else if(b.image){h=document.createElement("a");h.setAttribute("href",b.image);h.setAttribute("target","_blank");d.appendChild(h);var k=document.createElement("img");k.setAttribute("src",b.image);k.setAttribute("style","width:"+b.width+"px");document.getElementById("container").appendChild(c);h.appendChild(k)}else b.sceneId&&
(c.onclick=function(){loadScene(b.sceneId,b.targetPitch,b.targetYaw);return!1},c.ontouchend=function(){loadScene(b.sceneId,b.targetPitch,b.targetYaw);return!1},c.style.cursor="pointer",d.style.cursor="pointer"),document.getElementById("container").appendChild(c);c.appendChild(d);d.style.width=d.scrollWidth-20+"px";d.style.marginLeft=-(d.scrollWidth-26)/2+"px";d.style.marginTop=-d.scrollHeight-12+"px";b.div=c}):config.hotSpots=[],hotspotsCreated=!0,renderHotSpots())}
function destroyHotSpots(){config.hotSpots&&config.hotSpots.forEach(function(b){for(b=b.div;"container"!=b.parentNode.id;)b=b.parentNode;document.getElementById("container").removeChild(b)});hotspotsCreated=!1}
function renderHotSpots(){config.hotSpots.forEach(function(b){var c=Math.sin(b.pitch*Math.PI/180)*Math.sin(config.pitch*Math.PI/180)+Math.cos(b.pitch*Math.PI/180)*Math.cos((b.yaw+config.yaw)*Math.PI/180)*Math.cos(config.pitch*Math.PI/180);90>=b.yaw&&-90<b.yaw&&0>=c||(90<b.yaw||-90>=b.yaw)&&0>=c?b.div.style.visibility="hidden":(b.div.style.visibility="visible",b.div.style.top=-canvas.width/Math.tan(config.hfov*Math.PI/360)*(Math.sin(b.pitch*Math.PI/180)*Math.cos(config.pitch*Math.PI/180)-Math.cos(b.pitch*
Math.PI/180)*Math.cos((b.yaw+config.yaw)*Math.PI/180)*Math.sin(config.pitch*Math.PI/180))/c/2+canvas.height/2-13+"px",b.div.style.left=-canvas.width/Math.tan(config.hfov*Math.PI/360)*Math.sin((b.yaw+config.yaw)*Math.PI/180)*Math.cos(b.pitch*Math.PI/180)/c/2+canvas.width/2-13+"px")})}
function parseURLParameters(){var b=decodeURI(window.location.href).split("?");b.shift();for(var b=b[0].split("&"),c="{",d=0;d<b.length;d++){var h=b[d].split("=")[0],k=b[d].split("=")[1],c=c+('"'+h+'":');switch(h){case "hfov":case "pitch":case "yaw":case "haov":case "vaov":case "vOffset":c+=k;break;case "autoLoad":case "ignoreGPanoXMP":c+=JSON.parse(k);break;default:c+='"'+decodeURIComponent(k)+'"'}d<b.length-1&&(c+=",")}configFromURL=JSON.parse(c+"}");if(configFromURL.config){b=new XMLHttpRequest;
b.open("GET",configFromURL.config,!1);b.send();b=JSON.parse(b.responseText);b.basePath=configFromURL.config.substring(0,configFromURL.config.lastIndexOf("/")+1);for(var g in b)configFromURL[g]||(configFromURL[g]=b[g])}g=null;configFromURL.tour&&(b=new XMLHttpRequest,b.open("GET",configFromURL.tour,!1),b.send(),tourConfig=JSON.parse(b.responseText),tourConfig.basePath=configFromURL.tour.substring(0,configFromURL.tour.lastIndexOf("/")+1),tourConfig.default.firstScene&&(g=tourConfig.default.firstScene),
configFromURL.firstScene&&(g=configFromURL.firstScene));mergeConfig(g)}
function mergeConfig(b){config={};for(var c in defaultConfig)defaultConfig.hasOwnProperty(c)&&(config[c]=defaultConfig[c]);for(c in tourConfig.default)tourConfig.default.hasOwnProperty(c)&&(config[c]=tourConfig.default[c]);if(null!==b&&""!==b&&tourConfig.scenes&&tourConfig.scenes[b]){var d=tourConfig.scenes[b];for(c in d)d.hasOwnProperty(c)&&(config[c]=d[c]);config.activeScene=b}for(c in configFromURL)configFromURL.hasOwnProperty(c)&&(config[c]=configFromURL[c])}
function processOptions(){if("preview"in config){var b=config.preview;config.basePath?b=config.basePath+b:tourConfig.basePath&&(b=tourConfig.basePath+b);var c=new Image;c.crossOrigin="anonymous";c.id="preview";c.src=b;document.getElementById("container").appendChild(c)}for(var d in config)if(config.hasOwnProperty(d))switch(d){case "title":document.getElementById("title_box").innerHTML=config[d];document.getElementById("panorama_info").style.display="inline";break;case "author":document.getElementById("author_box").innerHTML=
"by "+config[d];document.getElementById("panorama_info").style.display="inline";break;case "fallback":document.getElementById("nocanvas").innerHTML='<p>Your browser does not support WebGL.<br><a href="'+config[d]+'" target="_blank">Click here to view this panorama in an alternative viewer.</a></p>';break;case "hfov":setHfov(config[d]);break;case "pitch":config.pitch=Math.max(config.minPitch,Math.min(config.maxPitch,config.pitch));break;case "autoLoad":!0===config[d]&&(document.getElementById("load_box").style.display=
"inline",document.getElementById("load_button").style.display="none",init(),requestAnimationFrame(animate));break;case "autoRotate":config.autoRotate=config[d];break;case "autoRotateInactivityDelay":config.autoRotateInactivityDelay=config[d];break;case "header":document.getElementsByTagName("head")[0].innerHTML+=config[d];break;case "showZoomCtrl":config[d]?document.getElementById("zoomcontrols").style.display="block":document.getElementById("zoomcontrols").style.display="none";break;case "showFullscreenCtrl":config[d]&&
("fullscreen"in document||"mozFullScreen"in document||"webkitIsFullScreen"in document||"msFullscreenElement"in document)?document.getElementById("fullscreentoggle_button").style.display="block":document.getElementById("fullscreentoggle_button").style.display="none"}}
function toggleFullscreen(){if(loaded&&!error)if(fullscreenActive)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else try{var b=document.getElementById("page");b.requestFullscreen?b.requestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.msRequestFullscreen?b.msRequestFullscreen():b.webkitRequestFullScreen()}catch(c){}}
function onFullScreenChange(){document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement?(document.getElementById("fullscreentoggle_button").classList.add("fullscreentoggle_button_active"),fullscreenActive=!0):(document.getElementById("fullscreentoggle_button").classList.remove("fullscreentoggle_button_active"),fullscreenActive=!1)}function zoomIn(b){loaded&&setHfov(config.hfov-=b)}function zoomOut(b){loaded&&setHfov(config.hfov+=b)}
function setHfov(b){config.hfov=b<config.minHfov&&"multires"!=config.type?config.minHfov:"multires"==config.type&&b<canvas.width/(config.multiRes.cubeResolution/90*0.9)?canvas.width/(config.multiRes.cubeResolution/90*0.9):b>config.maxHfov?config.maxHfov:b}function load(){clearError();document.getElementById("load_button").style.display="none";document.getElementById("load_box").style.display="inline";init();requestAnimationFrame(animate)}
function loadScene(b,c,d){loaded=!1;"same"===c&&(c=config.pitch);"same"===d?d=config.yaw:"sameAzimuth"===d&&(d=config.yaw+config.northOffset-tourConfig.scenes[b].northOffset);destroyHotSpots();mergeConfig(b);processOptions();c&&(config.pitch=c);d&&(config.yaw=d);load()};
</script></div></body></html>